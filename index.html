<!DOCTYPE html>
<html>
<head>
<title>Tile vector example</title>
<script src="https://code.jquery.com/jquery-1.11.2.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ol3/3.7.0/ol.css" type="text/css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/ol3/3.7.0/ol.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/proj4js/2.3.6/proj4.js"></script>
<script src="http://epsg.io/3006.js"></script>
<style>
 #map {
   width: 600px;
   height: 600px;
 }
</style>
</head>
<body>
  <div id="map" class="map" style="background: white;"></div>
<script>
var extent = [196608,5996544,2293760,8093696];

function get(url, callback) {
  var oReq = new XMLHttpRequest();
  oReq.open("GET", url, true);
  oReq.onload = function (oEvent) {
    if (oReq.status === 200) {
      callback(oReq.response);
    }
  };
  oReq.send(null);
}

var style = new ol.style.Style({
  fill: new ol.style.Fill({
    color: 'rgba(255, 0, 0, 0.6)'
  }),
  stroke: new ol.style.Stroke({
    color: '#000000',
    width: 1
  })
});

var layers = [
  new ol.layer.Vector({
    source: new ol.source.TileVector({
      tileGrid: new ol.tilegrid.TileGrid({
        extent: extent,
        origin: [196608, 5996544],
        resolutions: [2048]
      }),
      tileUrlFunction: function(tileCoord) {
        return 'data/geojson/ak_riks/'+1+'/'+tileCoord[1]+'/'+tileCoord[2]+'.geojson';
      },
      tileLoadFunction: function(url, success) {
        get(url, function(data) {
          var features = new ol.format.GeoJSON().readFeatures(data);
          success(features);
        });
      }
    }),
    style: style
  }),
  new ol.layer.Tile({
    source: new ol.source.TileDebug({
      projection: 'EPSG:3006',
      tileGrid: new ol.tilegrid.TileGrid({
        extent: extent,
        origin: [196608, 5996544],
        resolutions: [2048]
      })
    })
  })
]

var map = new ol.Map({
  controls: ol.control.defaults().extend([
    new ol.control.MousePosition()
  ]),
  layers: layers,
  target: document.getElementById('map'),
  view: new ol.View({
    projection: 'EPSG:3006',
    center: [434854, 7181717],
    resolutions: [2048],
    resolution: 2048
  })
});


</script>
</body>
</html>
